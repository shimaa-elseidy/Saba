import{a as Q}from"./chunk-QHJLIQUI.js";import{a as J}from"./chunk-IP3FY2TA.js";import{A as q,c as R,f as Z,k as U,t as G,u as X,v as $}from"./chunk-5ZW25HYA.js";import{c as S,d as k,f as h,i as E}from"./chunk-CU2TEK6Q.js";import{h as L,l as Y}from"./chunk-JKYV32XC.js";import"./chunk-SLPUACWX.js";import"./chunk-MMGRQEJU.js";import"./chunk-Q5MV2RZV.js";import{k as N,l as j,m as F,s as A,u as B,w as W}from"./chunk-EJ3EEOXZ.js";import{Cb as l,Db as V,Kb as t,Lb as n,Mb as x,Qb as y,Vb as d,Wb as m,eb as s,ec as o,fc as f,hc as T,jc as C,kb as w,kc as v,lc as M,na as _,oa as u,pa as P,qa as O,qb as D,rc as I,sc as H,tc as z,vb as b}from"./chunk-FHROAHAP.js";import"./chunk-WWX6BADO.js";function K(r,p){r&1&&(t(0,"div",25)(1,"i",4),o(2,"info"),n(),t(3,"p"),o(4,"No invoices found. Try adjusting your filters."),n()())}function ee(r,p){if(r&1&&(t(0,"option",40),o(1),n()),r&2){let e=p.$implicit;l("value",e.name),s(),f(e.name)}}function te(r,p){if(r&1){let e=y();t(0,"tr",29)(1,"td",30),x(2,"input",27),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),n(),t(7,"td"),o(8),I(9,"date"),n(),t(10,"td"),o(11),I(12,"currency"),n(),t(13,"td")(14,"div",31)(15,"select",32),M("ngModelChange",function(i){let c=_(e).$implicit;return v(c.status,i)||(c.status=i),u(i)}),d("change",function(){let i=_(e).$implicit,c=m(2);return u(c.onStatusChange(i))}),b(16,ee,2,2,"option",33),n()()(),t(17,"td",34)(18,"span",35),o(19,"link"),n(),t(20,"span",36),o(21,"content_copy"),n(),t(22,"span",37),o(23,"visibility"),n(),t(24,"span",38),o(25,"edit"),n(),t(26,"span",39),o(27,"delete"),n()()()}if(r&2){let e=p.$implicit,a=p.index,i=m(2);V("animation-delay",a*.05+"s"),s(4),f(e.invoiceNumber),s(2),f(e.customer),s(2),f(z(9,9,e.issueDate,"yyyy-MM-dd")),s(3),f(H(12,12,e.tourAmount)),s(3),l("ngClass",i.getStatusClass(e.status)),s(),C("ngModel",e.status),s(),l("ngForOf",i.statusOptions)}}function ne(r,p){if(r&1&&(t(0,"table",26)(1,"thead")(2,"tr")(3,"th"),x(4,"input",27),n(),t(5,"th"),o(6,"Invoice Number"),n(),t(7,"th"),o(8,"Customer"),n(),t(9,"th"),o(10,"Issue Date"),n(),t(11,"th"),o(12,"Tour Amount"),n(),t(13,"th"),o(14,"Status"),n(),t(15,"th"),o(16,"Action"),n()()(),t(17,"tbody"),b(18,te,28,14,"tr",28),n()()),r&2){let e=m();s(18),l("ngForOf",e.getDisplayedInvoices())}}function ie(r,p){if(r&1){let e=y();t(0,"div",41)(1,"button",42),d("click",function(){_(e);let i=m();return u(i.currentPage=i.currentPage-1)}),t(2,"i",4),o(3,"chevron_left"),n(),o(4," Previous "),n(),t(5,"span",43),o(6),n(),t(7,"button",42),d("click",function(){_(e);let i=m();return u(i.currentPage=i.currentPage+1)}),o(8," Next "),t(9,"i",4),o(10,"chevron_right"),n()()()}if(r&2){let e=m();s(),l("disabled",e.currentPage===1),s(5),T("Page ",e.currentPage," of ",e.totalPages,""),s(),l("disabled",e.currentPage===e.totalPages)}}var xe=(()=>{class r{constructor(e,a){this.invoiceService=e,this.toastr=a,this.filters=["All","Deleted"],this.originalInvoices=[],this.Invoices=[],this.statusOptions=[],this.startDate="",this.endDate="",this.currentPage=1,this.itemsPerPage=10}ngOnInit(){this.fetchStatuses(),this.fetchInvoices()}fetchStatuses(){this.invoiceService.getStatuses().subscribe({next:e=>{this.statusOptions=e},error:e=>{console.error("Error fetching statuses:",e)}})}onStatusChange(e){let a=e.invoiceNumber;this.invoiceService.updateInvoiceStatus(a,e.status).subscribe({next:i=>{this.toastr.success(i.message+` to ${e.status}`,"Success")},error:i=>{this.toastr.error("Failed to update invoice status","Error")}})}getDisplayedInvoices(){let e=(this.currentPage-1)*this.itemsPerPage,a=this.currentPage*this.itemsPerPage;return this.Invoices.slice(e,a)}getEntriesInfoText(){let e=this.Invoices.length,a=this.getDisplayedInvoices().length,i=(this.currentPage-1)*this.itemsPerPage+1,c=Math.min(i+a-1,e);return`Showing ${i} to ${c} of ${e} entries`}getStatusClass(e){switch(e){case"Pending":return"status-pending";case"OnReview":return"status-review";case"Completed":return"status-completed";case"Rejected":return"status-rejected";case"Canceled":return"status-canceled";case"Onprogress":return"status-onprogress";default:return""}}filter(e){e==="All"?(this.startDate="",this.endDate="",this.Invoices=[...this.originalInvoices]):this.Invoices=this.originalInvoices.filter(a=>a.status===e)}applyDateFilter(){if(!this.startDate&&!this.endDate){this.Invoices=[...this.originalInvoices];return}this.Invoices=this.originalInvoices.filter(e=>{let a=new Date(e.issueDate),i=this.startDate?new Date(this.startDate):null,c=this.endDate?new Date(this.endDate):null;return(!i||a>=i)&&(!c||a<=c)})}get totalPages(){return Math.ceil(this.Invoices.length/this.itemsPerPage)}fetchInvoices(){this.invoiceService.getInvoices().subscribe({next:e=>{console.log(e),this.originalInvoices=e,this.Invoices=[...e],this.startDate="",this.endDate=""},error:e=>{console.error("Error fetching invoices:",e)}})}static{this.\u0275fac=function(a){return new(a||r)(w(Q),w(J))}}static{this.\u0275cmp=D({type:r,selectors:[["app-invoices"]],decls:42,vars:5,consts:[[1,"container","animate__animated","animate__fadeIn"],[1,"page-header","animate__animated","animate__slideInDown"],[1,"d-flex","p-2","action-buttons","animate__animated","animate__fadeInLeft"],["routerLink","/dashboard/add-new-invoice",1,"create-btn","pulse-animation"],[1,"material-icons"],[1,"delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","18","height","18","fill","currentColor",1,"trash-icon"],["d","M9 3V4H4V6H5V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V6H20V4H15V3H9ZM7 6H17V19H7V6ZM9 8V17H11V8H9ZM13 8V17H15V8H13Z"],[1,"delete","ms-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","width","16","height","16","fill","currentColor",1,"refresh-icon"],["d","M17.65 6.35a8 8 0 1 0 2.35 5.65h-2a6 6 0 1 1-1.76-4.24l-2.65 2.65H20V4l-2.35 2.35z"],[1,"filters","animate__animated","animate__fadeInRight"],[1,"btn"],[1,"btn","btn-primary","hover-effect"],[1,"d-flex","align-items-center","date-filter"],["for","start",1,"me-1"],["type","date","id","start",3,"ngModelChange","change","ngModel"],["for","end",1,"me-1"],["type","date","id","end",3,"ngModelChange","change","ngModel"],[1,"btn","Show","hover-effect"],[1,"cont","animate__animated","animate__fadeInUp"],[1,"table-responsive"],["class","no-data-message",4,"ngIf"],["class","table",4,"ngIf"],["class","pagination-controls animate__animated animate__fadeIn",4,"ngIf"],[1,"no-data-message"],[1,"table"],["type","checkbox"],["class","animate__animated animate__fadeIn",3,"animation-delay",4,"ngFor","ngForOf"],[1,"animate__animated","animate__fadeIn"],[1,"checkbox-cell"],[1,"rounded","px-2","py-1","w-100","status-container",3,"ngClass"],[1,"form-select","custom-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"action-icons"],[1,"material-icons","link","hover-scale"],[1,"material-icons","copy","hover-scale"],[1,"material-icons","visual","hover-scale"],[1,"material-icons","edit","hover-scale"],[1,"material-icons","deletee","hover-scale"],[3,"value"],[1,"pagination-controls","animate__animated","animate__fadeIn"],[1,"btn","btn-sm","btn-outline-primary","hover-effect",3,"click","disabled"],[1,"mx-2"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Invoices Management"),n(),t(4,"p"),o(5,"Manage and track all your invoice records"),n()(),t(6,"div",2)(7,"button",3)(8,"i",4),o(9,"add"),n(),o(10," Create new Invoice "),n(),t(11,"button",5),d("click",function(){return i.filter("Deleted")}),P(),t(12,"svg",6),x(13,"path",7),n(),o(14," Deleted Invoices "),n(),O(),t(15,"button",8),d("click",function(){return i.filter("All")}),P(),t(16,"svg",9),x(17,"path",10),n()()(),O(),t(18,"div",11)(19,"button",12),o(20,"Bulk Actions \u25BC"),n(),t(21,"button",13),o(22,"Apply"),n(),t(23,"div",14)(24,"label",15),o(25,"Start Date:"),n(),t(26,"input",16),M("ngModelChange",function(g){return v(i.startDate,g)||(i.startDate=g),g}),d("change",function(){return i.applyDateFilter()}),n()(),t(27,"div",14)(28,"label",17),o(29,"End Date:"),n(),t(30,"input",18),M("ngModelChange",function(g){return v(i.endDate,g)||(i.endDate=g),g}),d("change",function(){return i.applyDateFilter()}),n()(),t(31,"button",13),o(32,"Filter"),n(),t(33,"button",13),o(34,"Export to CSV"),n(),t(35,"button",19),o(36,"Show / Hide columns"),n()(),t(37,"div",20)(38,"div",21),b(39,K,5,0,"div",22)(40,ne,19,1,"table",23)(41,ie,11,4,"div",24),n()()()),a&2&&(s(26),C("ngModel",i.startDate),s(4),C("ngModel",i.endDate),s(9),l("ngIf",i.Invoices.length===0),s(),l("ngIf",i.Invoices.length>0),s(),l("ngIf",i.Invoices.length>0))},dependencies:[j,Y,L,W,N,F,B,A,q,X,$,R,G,Z,U],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css";@font-face{font-family:Material Icons;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v143/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format("woff2")}.material-icons[_ngcontent-%COMP%]{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 4px 6px #2d60ff4d}50%{transform:scale(1.03);box-shadow:0 6px 12px #2d60ff80}to{transform:scale(1);box-shadow:0 4px 6px #2d60ff4d}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.container[_ngcontent-%COMP%]{background-color:#ffffffd9;margin:20px auto;border-radius:15px;padding:25px;width:90%;max-width:1400px;font-family:Inter,sans-serif;box-shadow:0 8px 30px #0000001a;display:flex;flex-direction:column;align-items:center}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px;width:100%}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2d60ff;font-weight:700;margin-bottom:5px}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:16px}.action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;margin-bottom:20px}.cont[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;width:100%;border-radius:12px;box-shadow:0 4px 12px #0000000d}.cont[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cont[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#2d60ff;border-radius:10px}.cont[_ngcontent-%COMP%]{scrollbar-color:#2d60ff #f1f1f1;scrollbar-width:thin}.create-btn[_ngcontent-%COMP%]{background-color:#2d60ff;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:16px;font-weight:600;margin-right:10px;cursor:pointer;display:flex;align-items:center;gap:5px;transition:all .3s ease}.create-btn[_ngcontent-%COMP%]:hover{background-color:#1a4ad9;transform:translateY(-2px)}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.delete[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important;padding:8px 20px;border:none;border-radius:12px;cursor:pointer;box-shadow:0 4px 6px #0003;transition:all .3s ease-in-out;display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600}.delete[_ngcontent-%COMP%]:hover{box-shadow:0 6px 8px #0006;transform:translateY(-2px)}.trash-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:#0d62e2}.refresh-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:#0d62e2;animation:_ngcontent-%COMP%_rotate 1.5s linear infinite;color:gray}.filters[_ngcontent-%COMP%]{display:flex;margin:20px auto;gap:15px;flex-wrap:wrap;justify-content:center;width:100%}.filters[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 15px;background-color:#f5f5f5;border:1px solid #dcdcdc;border-radius:8px;cursor:pointer;transition:all .3s ease}.hover-effect[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.date-filter[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:5px 10px;border-radius:8px;box-shadow:0 2px 4px #0000000d}select.form-select[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-weight:500}.filters[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2d60ff;color:#fff;border-radius:8px;padding:8px 15px;border:none}.filters[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#1a4ad9}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #dcdcdc;border-radius:5px;transition:all .3s ease}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#2d60ff;box-shadow:0 0 0 3px #2d60ff40;outline:none}td[_ngcontent-%COMP%]{padding:12px;text-align:left}.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;transition:all .3s ease}.status-review[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460;transition:all .3s ease}.status-completed[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;transition:all .3s ease}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;transition:all .3s ease}.status-canceled[_ngcontent-%COMP%]{background-color:#e2e3e5;color:#383d41;transition:all .3s ease}.status-onprogress[_ngcontent-%COMP%]{background-color:#cce5ff;color:#004085;transition:all .3s ease}.status-container[_ngcontent-%COMP%]{transition:all .3s ease;border-left:4px solid transparent}.status-pending.status-container[_ngcontent-%COMP%]{border-left-color:#ffc107}.status-completed.status-container[_ngcontent-%COMP%]{border-left-color:#28a745}.status-rejected.status-container[_ngcontent-%COMP%]{border-left-color:#dc3545}.status-review.status-container[_ngcontent-%COMP%]{border-left-color:#17a2b8}.status-canceled.status-container[_ngcontent-%COMP%]{border-left-color:#6c757d}.status-onprogress.status-container[_ngcontent-%COMP%]{border-left-color:#007bff}.form-select[_ngcontent-%COMP%]{background-color:transparent!important;box-shadow:none!important;border:none!important;padding-left:0;font-weight:700;width:200px;height:40px;cursor:pointer;transition:all .3s ease}.form-select[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #2d60ff40!important}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px;background-color:#fff;color:#333;font-weight:500}.form-select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:1px solid #ccc;padding:8px 12px;font-size:16px;color:#333;width:100%;cursor:pointer;border-radius:4px}.table-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.table-responsive[_ngcontent-%COMP%]{width:100%;margin:15px 0;background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 15px #00000014;overflow-x:auto}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:15px 12px;text-align:left;white-space:nowrap;vertical-align:middle}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#495057;border-bottom:2px solid #e9ecef;position:sticky;top:0;background-color:#fff;z-index:10}.table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s ease}.table-responsive[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#2d60ff08}.table-responsive[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]{text-align:left;padding:15px;font-size:14px;color:#555}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin:0 5px;cursor:pointer;font-size:18px;transition:all .2s ease}.table-responsive[_ngcontent-%COMP%]   .hover-scale[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%]{color:#2ca9bc}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{color:#ff9706}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#0d62e2}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .deletee[_ngcontent-%COMP%]{color:#e02727}.table-responsive[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;padding:10px}.table-responsive[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;padding:8px 15px;border-radius:8px;transition:all .3s ease}.table-responsive[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.table-responsive[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.table-responsive[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 0;color:#6c757d}.table-responsive[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:15px;color:#2d60ff}.table-responsive[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 992px){.table-responsive[_ngcontent-%COMP%]{width:95%;margin:15px auto}}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{width:95%;padding:15px;border-radius:8px;margin:15px auto 30px}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}}@media (max-width: 480px){.table-responsive[_ngcontent-%COMP%]{padding:10px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:13px}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 6px}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px;margin:0 3px}}'],data:{animation:[S("fadeIn",[E(":enter",[h({opacity:0,transform:"translateY(20px)"}),k("300ms ease-out",h({opacity:1,transform:"translateY(0)"}))])]),S("slideIn",[E(":enter",[h({opacity:0,transform:"translateX(-20px)"}),k("300ms ease-out",h({opacity:1,transform:"translateX(0)"}))])])]}})}}return r})();export{xe as InvoicesComponent};
