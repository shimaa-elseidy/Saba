import{a as z}from"./chunk-YB2VETAR.js";import{a as D}from"./chunk-LQG3IROI.js";import{a as R}from"./chunk-IP3FY2TA.js";import{A as V,c as I,f as T,k as E}from"./chunk-5ZW25HYA.js";import"./chunk-CU2TEK6Q.js";import{g as S}from"./chunk-JKYV32XC.js";import"./chunk-SLPUACWX.js";import"./chunk-MMGRQEJU.js";import"./chunk-Q5MV2RZV.js";import{l as w,m as k}from"./chunk-EJ3EEOXZ.js";import{Cb as g,Kb as i,Lb as o,Mb as f,Qb as C,Vb as d,Wb as c,_a as u,ca as x,eb as s,ec as m,fc as M,gc as h,jc as P,kc as O,lc as v,na as l,oa as p,qb as y,vb as _}from"./chunk-FHROAHAP.js";import"./chunk-WWX6BADO.js";function F(r,b){if(r&1){let t=C();i(0,"div",15)(1,"div",16)(2,"textarea",17),v("ngModelChange",function(n){l(t);let a=c(2);return O(a.replyContent,n)||(a.replyContent=n),p(n)}),m(3,"        "),o(),i(4,"div",18)(5,"button",19),d("click",function(){l(t);let n=c(2);return p(n.cancelReply())}),m(6,"Cancel"),o(),i(7,"button",20),d("click",function(){l(t);let n=c().$implicit,a=c();return p(a.submitReply(n.id))}),m(8,"Send Reply"),o()()()()}if(r&2){let t=c(2);s(2),P("ngModel",t.replyContent)}}function j(r,b){if(r&1){let t=C();i(0,"div",3)(1,"div",4),f(2,"img",5),i(3,"div",6)(4,"h2"),m(5),o(),i(6,"p"),m(7),o()()(),i(8,"div",7)(9,"div",8)(10,"button",9),d("click",function(){let n=l(t).$implicit,a=c();return p(a.openChat(n))}),f(11,"i",10),o(),i(12,"button",11),d("click",function(){let n=l(t).$implicit,a=c();return p(a.deleteComment(n.id))}),f(13,"i",12),o()(),i(14,"button",13),d("click",function(){let n=l(t).$implicit,a=c();return p(a.startReply(n.id))}),m(15,"\u21A9 Reply"),o()(),_(16,F,9,1,"div",14),o()}if(r&2){let t=b.$implicit,e=c();s(2),g("src",t.user.profilePicture,u),s(3),M(t.user.name),s(2),h('"',t.content,'"'),s(9),g("ngIf",e.replyingToCommentId===t.id)}}var H=(()=>{class r{constructor(){this.commentsService=x(z),this.toastr=x(R),this.router=x(S),this.chatService=x(D),this.comments=[],this.replyingToCommentId=null,this.replyContent=""}ngOnInit(){this.loadComments()}loadComments(){this.commentsService.getAllCommentsForTours().subscribe({next:t=>{this.comments=t},error:t=>{console.error("Error loading comments:",t)}})}deleteComment(t){this.commentsService.deleteCommentById(t).subscribe({next:()=>{this.comments=this.comments.filter(e=>e.id!==t),this.toastr.success("Comment deleted successfully!","Deleted")},error:e=>{this.toastr.error("Failed to delete comment.","Error")}})}startReply(t){this.replyingToCommentId=t,this.replyContent=""}cancelReply(){this.replyingToCommentId=null,this.replyContent=""}submitReply(t){if(!this.replyContent.trim()){this.toastr.warning("Please enter a reply message.","Warning");return}this.commentsService.replyToComment(t,this.replyContent).subscribe({next:e=>{this.toastr.success("Reply sent successfully!","Success"),this.cancelReply(),this.loadComments()},error:e=>{console.error("Error sending reply:",e),this.toastr.error("Failed to send reply.","Error")}})}openChat(t){t&&t.user&&t.user.userID?(this.chatService.setSelectedUserId(t.user.userID),this.router.navigate(["/dashboard/chat"])):this.toastr.error("User ID is missing or invalid.")}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=y({type:r,selectors:[["app-comments"]],decls:4,vars:2,consts:[[1,"recentComment"],[1,"text-center"],["class","comments-container",4,"ngFor","ngForOf"],[1,"comments-container"],[1,"comment-card"],["alt","User",1,"avatar",3,"src"],[1,"comment-content"],[1,"actions"],[1,"d-flex"],[1,"icon-btn","btn","btn-light","me-2",3,"click"],[1,"bi","bi-chat-dots-fill"],[1,"icon-btn","btn","btn-light",3,"click"],[1,"bi","bi-x-lg"],[1,"reply-btn",3,"click"],["class","reply-form",4,"ngIf"],[1,"reply-form"],[1,"reply-input-container"],["placeholder","Write your reply...","rows","3",1,"reply-textarea",3,"ngModelChange","ngModel"],[1,"reply-actions"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"h1",1),m(2),o(),_(3,j,17,4,"div",2),o()),e&2&&(s(2),h("Comment for All Tours (",n.comments.length,")"),s(),g("ngForOf",n.comments))},dependencies:[w,k,V,I,T,E],styles:['.recentComment[_ngcontent-%COMP%]{margin:40px auto 170px;max-width:700px;padding:30px;box-shadow:0 8px 30px #2563eb33;border-radius:16px;background-color:#f0f4ff;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2563eb;font-weight:700;margin-bottom:24px;animation:_ngcontent-%COMP%_titlePulse 2s infinite}.text-center[_ngcontent-%COMP%]{text-align:center}@keyframes _ngcontent-%COMP%_titlePulse{0%{text-shadow:0 0 0 rgba(37,99,235,0)}50%{text-shadow:0 0 10px rgba(37,99,235,.3)}to{text-shadow:0 0 0 rgba(37,99,235,0)}}.comments-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;align-items:center;width:100%}.comments-container[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.comments-container[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.comments-container[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.comments-container[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.comments-container[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.comments-container[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.comments-container[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.comments-container[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}.comment-card[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-radius:16px;box-shadow:0 6px 24px #2563eb2e;padding:20px 24px 20px 80px;position:relative;min-width:220px;max-width:90%;width:100%;display:flex;align-items:flex-start;margin-bottom:0;animation:_ngcontent-%COMP%_cardAppear .5s ease-out;transition:all .3s ease}.comment-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 30px #2563eb40}@keyframes _ngcontent-%COMP%_cardAppear{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.comment-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:absolute;left:16px;top:16px;width:48px;height:48px;border-radius:50%;border:2px solid #fff;object-fit:cover;box-shadow:0 2px 8px #2563eb1a}.comment-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin:0 0 8px;color:#fff}.comment-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0;color:#e0e7ff}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:0;gap:8px;width:100%}.d-flex[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:0;justify-content:center}.icon-btn[_ngcontent-%COMP%]{background:#fff!important;color:#2563eb!important;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 1px 4px #2563eb14;transition:all .3s ease}.icon-btn[_ngcontent-%COMP%]:hover{background:#f1f5ff!important;transform:scale(1.15) rotate(5deg);box-shadow:0 4px 8px #2563eb33}.icon-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:all .3s ease}.icon-btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .5s ease}@keyframes _ngcontent-%COMP%_iconPulse{0%{transform:scale(1)}50%{transform:scale(1.3)}to{transform:scale(1)}}.icon-btn.btn-light[_ngcontent-%COMP%]   .bi-x-lg[_ngcontent-%COMP%]{color:#ef4444!important}.reply-btn[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border:2px solid #2563eb;border-radius:20px;padding:6px 18px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s ease;margin-top:4px;margin-bottom:12px;position:relative;overflow:hidden;z-index:1}.reply-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:#1e40af;transition:all .3s ease;z-index:-1}.reply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #2563eb4d}.reply-btn[_ngcontent-%COMP%]:hover:before{left:0;animation:_ngcontent-%COMP%_buttonSlide .3s forwards}@keyframes _ngcontent-%COMP%_buttonSlide{0%{left:-100%}to{left:0}}@media (max-width: 576px){.recentComment[_ngcontent-%COMP%]{max-width:90%;padding:20px;margin:100px auto}.comment-card[_ngcontent-%COMP%]{box-shadow:0 3px 12px #2563eb29;padding:16px 12px 16px 60px;min-width:0}.comment-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:36px;height:36px;left:8px;top:8px}.comment-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}.comment-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.icon-btn[_ngcontent-%COMP%]{width:30px;height:30px;font-size:1rem}.reply-btn[_ngcontent-%COMP%]{font-size:.95rem;padding:5px 12px;margin-bottom:10px}}.reply-form[_ngcontent-%COMP%]{margin-top:15px;padding:15px;background-color:#f8f9fa;border-radius:8px;border-left:3px solid #2563eb;animation:_ngcontent-%COMP%_slideDown .3s ease-out;box-shadow:0 4px 12px #2563eb1a;width:90%;max-width:600px;margin-left:auto;margin-right:auto}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.reply-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.reply-textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-family:inherit;font-size:14px;resize:vertical;min-height:80px}.reply-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.reply-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.reply-btn[_ngcontent-%COMP%]{transition:all .2s ease}.reply-btn[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}']})}}return r})();export{H as CommentsComponent};
