import{a as U}from"./chunk-M5QVVNU3.js";import{A as z,c as E,f as F,k as T}from"./chunk-5ZW25HYA.js";import"./chunk-JKYV32XC.js";import"./chunk-SLPUACWX.js";import"./chunk-MMGRQEJU.js";import{c as S}from"./chunk-Q5MV2RZV.js";import{m as V}from"./chunk-EJ3EEOXZ.js";import{Cb as g,Eb as b,Kb as o,Lb as i,Mb as u,Qb as m,Vb as p,Wb as s,_a as v,dc as h,eb as l,ec as c,fc as C,gc as w,hc as k,jc as y,kb as x,kc as R,lc as I,m as P,na as d,oa as a,qb as O,vb as M}from"./chunk-FHROAHAP.js";import"./chunk-WWX6BADO.js";function D(r,f){if(r&1){let e=m();o(0,"div",7),p("click",function(){d(e);let t=s();return a(t.toggleUpload())}),u(1,"i",8),o(2,"span"),c(3,"Upload Reel"),i()()}}function A(r,f){if(r&1){let e=m();o(0,"div",9),p("click",function(){d(e);let t=s();return a(t.toggleUpload())}),i()}}function B(r,f){if(r&1){let e=m();o(0,"div",24)(1,"span",25),c(2),i(),o(3,"span",26),c(4),i(),o(5,"button",27),p("click",function(){d(e);let t=s(2);return a(t.removeFile())}),c(6,"\xD7"),i()()}if(r&2){let e=s(2);l(2),C(e.newReelFile.name),l(2),w("(",e.getFileSize(e.newReelFile.size),")")}}function j(r,f){if(r&1){let e=m();o(0,"div",10)(1,"div",11)(2,"h3"),c(3,"Upload New Reel"),i(),o(4,"button",12),p("click",function(){d(e);let t=s();return a(t.toggleUpload())}),c(5,"\xD7"),i()(),o(6,"div",13)(7,"div",14)(8,"label",15),c(9,"Select Video:"),i(),o(10,"input",16,0),p("change",function(t){d(e);let _=s();return a(_.onFileSelected(t))}),i(),o(12,"button",17),p("click",function(){d(e);let t=h(11);return a(t.click())}),c(13," Choose File "),i(),M(14,B,7,2,"div",18),i(),o(15,"div",19)(16,"label",20),c(17,"Description:"),i(),o(18,"textarea",21),I("ngModelChange",function(t){d(e);let _=s();return R(_.newReelDescription,t)||(_.newReelDescription=t),a(t)}),i()(),o(19,"button",22),p("click",function(){d(e);let t=s();return a(t.uploadReel())}),u(20,"i",23),c(21," Upload "),i()()()}if(r&2){let e=s();l(14),g("ngIf",e.newReelFile),l(4),y("ngModel",e.newReelDescription)}}function L(r,f){if(r&1){let e=m();o(0,"div",28)(1,"div",29),u(2,"video",30),o(3,"button",31),p("click",function(){d(e);let t=s();return a(t.previousReel())}),u(4,"i",32),i(),o(5,"button",33),p("click",function(){d(e);let t=s();return a(t.nextReel())}),u(6,"i",34),i()(),o(7,"div",35),c(8),i(),o(9,"div",36)(10,"div",37),c(11),i(),o(12,"div",38),c(13),i()(),o(14,"div",39)(15,"button",40),p("click",function(){d(e);let t=s();return a(t.toggleLike(t.reels[t.currentReelIndex]))}),u(16,"i",41),o(17,"span"),c(18),i()()()()}if(r&2){let e=s();l(2),g("src",e.reels[e.currentReelIndex].videoUrl,v),l(),g("disabled",e.currentReelIndex===0),l(2),g("disabled",e.currentReelIndex===e.reels.length-1),l(3),k(" ",e.currentReelIndex+1," / ",e.reels.length," "),l(3),C(e.reels[e.currentReelIndex].username),l(2),C(e.reels[e.currentReelIndex].description),l(3),b("bi-heart-fill",e.reels[e.currentReelIndex].liked)("bi-heart",!e.reels[e.currentReelIndex].liked),l(2),C(e.reels[e.currentReelIndex].likes)}}function N(r,f){if(r&1){let e=m();o(0,"div",42)(1,"p"),c(2,"No reels available. Be the first to upload!"),i(),o(3,"button",43),p("click",function(){d(e);let t=s();return a(t.toggleUpload())}),u(4,"i",8),c(5," Upload Reel "),i()()}}var Y=(()=>{class r{constructor(e,n){this.http=e,this.authService=n,this.reels=[],this.currentReelIndex=0,this.isUploading=!1,this.newReelFile=null,this.newReelDescription="",this.isAdmin=!1}ngOnInit(){this.fetchReels().subscribe(e=>{this.isAdmin=this.authService.getUserRole()===1,this.reels=e,window.scrollTo(0,0)})}fetchReels(){return P([{id:1,videoUrl:"../../../assets/SampleVideo_1280x720_1mb.mp4",username:"naturelover",description:"Check out this animated bunny \u{1F430}\u{1F333}",likes:421,liked:!1},{id:2,videoUrl:"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_5mb.mp4",username:"john_doe",description:"Epic video clip from Big Buck Bunny! \u{1F3A5}",likes:899,liked:!1},{id:3,videoUrl:"https://sample-videos.com/video123/mp4/720/sample-mp4-video.mp4",username:"videoFan",description:"A classic sample MP4 video \u{1F3AC}",likes:134,liked:!1}])}previousReel(){this.currentReelIndex>0&&(this.currentReelIndex--,this.pauseAllVideos(),this.playCurrentVideo())}nextReel(){this.currentReelIndex<this.reels.length-1&&(this.currentReelIndex++,this.pauseAllVideos(),this.playCurrentVideo())}pauseAllVideos(){document.querySelectorAll("video").forEach(n=>{n.pause()})}removeFile(){this.newReelFile=null;let e=document.getElementById("video-input");e&&(e.value="")}getFileSize(e){if(e===0)return"0 Bytes";let n=1024,t=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,_)).toFixed(2))+" "+t[_]}playCurrentVideo(){setTimeout(()=>{let e=document.querySelector(".reel-video");e&&e.play().catch(n=>{console.log("Autoplay prevented:",n)})},100)}toggleLike(e){e.liked=!e.liked,e.likes+=e.liked?1:-1}toggleUpload(){this.isUploading=!this.isUploading,this.isUploading?this.pauseAllVideos():(this.newReelFile=null,this.newReelDescription="",this.playCurrentVideo())}onFileSelected(e){let n=e.target.files[0];n&&n.type.includes("video/")?this.newReelFile=n:(alert("Please select a valid video file"),this.newReelFile=null)}uploadReel(){if(!this.newReelFile){alert("Please select a video file");return}let e=new FormData;e.append("video",this.newReelFile),e.append("description",this.newReelDescription);let n={id:this.reels.length+1,videoUrl:URL.createObjectURL(this.newReelFile),username:"currentUser",description:this.newReelDescription,likes:0,liked:!1};this.reels.unshift(n),this.toggleUpload(),this.currentReelIndex=0,setTimeout(()=>{this.playCurrentVideo()},300)}static{this.\u0275fac=function(n){return new(n||r)(x(S),x(U))}}static{this.\u0275cmp=O({type:r,selectors:[["app-reels"]],decls:6,vars:5,consts:[["fileInput",""],[1,"reels-container"],["class","upload-button",3,"click",4,"ngIf"],["class","overlay",3,"click",4,"ngIf"],["class","upload-form",4,"ngIf"],["class","reels-viewer",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"upload-button",3,"click"],[1,"bi","bi-plus-lg"],[1,"overlay",3,"click"],[1,"upload-form"],[1,"form-header"],[1,"close-button",3,"click"],[1,"form-body"],[1,"file-input"],["for","video-input"],["type","file","id","video-input","accept","video/*",2,"display","none",3,"change"],[1,"file-select-button",3,"click"],["class","file-info",4,"ngIf"],[1,"description-input"],["for","description"],["id","description","rows","3","placeholder","Write a description for your reel...",3,"ngModelChange","ngModel"],[1,"upload-submit",3,"click"],[1,"bi","bi-cloud-upload"],[1,"file-info"],[1,"file-name"],[1,"file-size"],[1,"remove-file",3,"click"],[1,"reels-viewer"],[1,"reel-content"],["controls","","autoplay","","loop","",1,"reel-video",3,"src"],[1,"nav-button","prev-button",3,"click","disabled"],[1,"bi","bi-chevron-left"],[1,"nav-button","next-button",3,"click","disabled"],[1,"bi","bi-chevron-right"],[1,"reel-counter"],[1,"reel-info"],[1,"username"],[1,"description"],[1,"reel-actions"],[1,"like-button",3,"click"],[1,"bi"],[1,"empty-state"],[3,"click"]],template:function(n,t){n&1&&(o(0,"div",1),M(1,D,4,0,"div",2)(2,A,1,0,"div",3)(3,j,22,2,"div",4)(4,L,19,12,"div",5)(5,N,6,0,"div",6),i()),n&2&&(l(),g("ngIf",t.isAdmin),l(),g("ngIf",t.isUploading),l(),g("ngIf",t.isUploading),l(),g("ngIf",t.reels.length>0),l(),g("ngIf",t.reels.length===0))},dependencies:[z,E,F,T,V],styles:['.reels-container[_ngcontent-%COMP%]{padding:25px;position:relative;width:100%;max-width:100%;background-image:url("./media/33078713_paperai_22_095-TIUDX5JC.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;color:#fff;display:flex;flex-direction:column;align-items:center}.upload-button[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#00f;color:#fff;padding:8px 16px;border-radius:20px;display:flex;align-items:center;gap:8px;cursor:pointer;z-index:100;box-shadow:0 2px 8px #0000004d;transition:transform .2s ease}.upload-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.upload-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;z-index:150}.upload-form[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:500px;background-color:#fff;border-radius:8px;z-index:200;overflow:hidden;box-shadow:0 4px 24px #0000004d}.upload-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{background-color:#f8f8f8;padding:16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}.upload-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.upload-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#777}.upload-form[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#333}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]{padding:20px}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%], .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]{margin-bottom:16px}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .description-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:red;outline:none}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .file-select-button[_ngcontent-%COMP%]{width:fit-content;background-color:#f0f0f0;border:1px solid #ddd;padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .2s}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .file-select-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{margin-top:8px;padding:8px;background-color:#f8f8f8;border-radius:4px;border:1px dashed #ddd}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{color:#666;font-size:.9em;margin-left:8px}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .upload-submit[_ngcontent-%COMP%]{background-color:red;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s ease}.upload-form[_ngcontent-%COMP%]   .form-body[_ngcontent-%COMP%]   .upload-submit[_ngcontent-%COMP%]:hover{background-color:#e60000}.reels-viewer[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;margin:0 auto;padding:20px 0;display:flex;flex-direction:column;align-items:center}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]{position:relative;width:80%;height:600px;border-radius:10px;overflow:hidden;box-shadow:0 4px 10px #0000001a}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .reel-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#00000080;color:#fff;border:none;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .3s ease}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]:hover{background:#000000b3}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button.prev-button[_ngcontent-%COMP%]{left:10px}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button.next-button[_ngcontent-%COMP%]{right:10px}.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#fff}.reels-viewer[_ngcontent-%COMP%]   .reel-counter[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;color:#000;align-self:center}.reels-viewer[_ngcontent-%COMP%]   .reel-info[_ngcontent-%COMP%]{width:100%;margin-left:55px;margin-top:15px;padding:0 15px;color:#000}.reels-viewer[_ngcontent-%COMP%]   .reel-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:800;font-size:20px;margin-bottom:8px}.reels-viewer[_ngcontent-%COMP%]   .reel-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.reels-viewer[_ngcontent-%COMP%]   .reel-actions[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding:0 15px}.reels-viewer[_ngcontent-%COMP%]   .reel-actions[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]{background:none;border:none;display:flex;align-items:center;color:#000;gap:5px;cursor:pointer}.reels-viewer[_ngcontent-%COMP%]   .reel-actions[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.reels-viewer[_ngcontent-%COMP%]   .reel-actions[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]   i.bi-heart-fill[_ngcontent-%COMP%]{color:red}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80vh;color:#333;text-align:center}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:18px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:red;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-weight:500}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e60000}@media (max-width: 768px){.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]{height:450px}}@media (max-width: 480px){.reels-viewer[_ngcontent-%COMP%]   .reel-content[_ngcontent-%COMP%]{height:400px}}.remove-file[_ngcontent-%COMP%]{background:none;border:none;color:#f44;margin-left:8px;cursor:pointer;font-size:1.2em;padding:0 4px}.remove-file[_ngcontent-%COMP%]:hover{color:#c00}']})}}return r})();export{Y as ReelsComponent};
