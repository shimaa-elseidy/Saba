import{a as W}from"./chunk-M5QVVNU3.js";import{a as F}from"./chunk-IP3FY2TA.js";import{A as j,c as T,f as B,k as V}from"./chunk-5ZW25HYA.js";import{c as y,d as O,f as h,g as z,i as v}from"./chunk-CU2TEK6Q.js";import"./chunk-JKYV32XC.js";import"./chunk-SLPUACWX.js";import"./chunk-MMGRQEJU.js";import"./chunk-Q5MV2RZV.js";import{l as k,m as A}from"./chunk-EJ3EEOXZ.js";import{Cb as l,Db as x,Fb as E,Kb as n,Lb as t,Mb as p,Qb as D,Vb as M,Wb as g,eb as a,ec as i,fc as d,hc as I,jc as b,kb as u,kc as P,lc as w,na as m,oa as f,qb as S,vb as C}from"./chunk-FHROAHAP.js";import"./chunk-WWX6BADO.js";function L(s,_){s&1&&(n(0,"div",2),p(1,"div",3),t())}function Y(s,_){if(s&1&&(n(0,"tr")(1,"th"),p(2,"input",20),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),i(10),t(),n(11,"td"),i(12),t(),n(13,"td"),i(14),t()()),s&2){let e=_.$implicit,r=g(2);a(4),d(e.username),a(2),d(e.userEmail),a(2),d(e.gateway),a(2),d(e.paymentDate),a(2),d(e.amount),a(),E(r.getStatusClass(e.status)),a(),d(e.status)}}function R(s,_){if(s&1){let e=D();n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div")(4,"h4"),i(5,"My Wallet Balance"),t(),n(6,"h2"),i(7),t()(),p(8,"i",7),t(),n(9,"div",6)(10,"div")(11,"h4"),i(12,"My Refunds"),t(),n(13,"h2"),i(14),t()(),p(15,"i",8),t(),n(16,"div",6)(17,"div")(18,"h4"),i(19,"Total Due Amount"),t(),n(20,"h2"),i(21),t()(),p(22,"i",9),t()(),n(23,"div",10)(24,"button",11),i(25,"Bulk Actions \u25BC"),t(),n(26,"button",12),i(27,"Apply"),t(),n(28,"div",13)(29,"label",14),i(30,"Start Date:"),t(),n(31,"input",15),w("ngModelChange",function(o){m(e);let c=g();return P(c.startDate,o)||(c.startDate=o),f(o)}),M("change",function(){m(e);let o=g();return f(o.filterByDate())}),t()(),n(32,"div",13)(33,"label",16),i(34,"End Date:"),t(),n(35,"input",17),w("ngModelChange",function(o){m(e);let c=g();return P(c.endDate,o)||(c.endDate=o),f(o)}),M("change",function(){m(e);let o=g();return f(o.filterByDate())}),t()(),n(36,"button",12),i(37,"Filter"),t(),n(38,"button",12),i(39,"Export to CSV"),t(),n(40,"button",11),i(41,"Show / Hide columns"),t()(),n(42,"div",18)(43,"table",19)(44,"thead")(45,"tr")(46,"th"),p(47,"input",20),t(),n(48,"th"),i(49,"Username"),t(),n(50,"th"),i(51,"User Email"),t(),n(52,"th"),i(53,"Gateway"),t(),n(54,"th"),i(55,"Payment Date"),t(),n(56,"th"),i(57,"Amount"),t(),n(58,"th"),i(59,"Status"),t()()(),n(60,"tbody"),C(61,Y,15,8,"tr",21),t(),n(62,"tfoot")(63,"tr")(64,"td",22)(65,"div",23),i(66),t()()()()()()()}if(s&2){let e=g();l("@fadeInAnimation",void 0),a(2),l("@cardAnimation","in"),a(5),d(e.walletBalance),a(2),x("animation-delay","0.2s"),l("@cardAnimation","in"),a(5),d(e.totalRefunds),a(2),x("animation-delay","0.4s"),l("@cardAnimation","in"),a(5),d(e.totalDueAmount),a(2),x("animation-delay","0.6s"),l("@cardAnimation","in"),a(8),b("ngModel",e.startDate),a(4),b("ngModel",e.endDate),a(7),x("animation-delay","0.8s"),l("@cardAnimation","in"),a(19),l("ngForOf",e.filteredTransactions),a(5),I(" Showing ",e.filteredTransactions.length," of ",e.totalEntries," entries ")}}var Q=(()=>{class s{constructor(e,r){this.authService=e,this.toastr=r,this.wallets=[],this.walletBalance=0,this.totalRefunds=0,this.totalDueAmount=0,this.isLoading=!0,this.animationState="in",this.currentPage=1,this.pageSize=10,this.totalEntries=0,this.startDate="",this.endDate="",this.filteredTransactions=[]}filterByDate(){if(this.startDate&&this.endDate){let e=new Date(this.startDate),r=new Date(this.endDate);this.filteredTransactions=this.wallets.filter(o=>{let c=new Date(o.paymentDate);return c>=e&&c<=r})}else this.filteredTransactions=[...this.wallets];this.totalEntries=this.filteredTransactions.length}getStatusClass(e){switch(e){case"Completed":return"completed";case"Pending":return"pending";case"Failed":return"failed";case"Rejected":return"rejected";case"On progress":return"on-progress";case"Refund":return"refund";default:return""}}ngOnInit(){this.isLoading=!0,setTimeout(()=>{this.authService.fetchWallet().subscribe({next:e=>{this.wallets=e.payments||[],console.log(this.wallets),this.walletBalance=e.walletBalance??0,this.totalRefunds=e.totalRefunds??0,this.totalDueAmount=e.totalDueAmount??0,this.filterByDate(),this.isLoading=!1},error:e=>{this.toastr.error("Error fetching Wallet","Error"),this.isLoading=!1}})},500)}static{this.\u0275fac=function(r){return new(r||s)(u(W),u(F))}}static{this.\u0275cmp=S({type:s,selectors:[["app-my-wallet"]],decls:2,vars:2,consts:[["class","loading-container",4,"ngIf"],["class","overview",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"overview"],[1,"stats"],[1,"stat-card"],[1,"bi","bi-cash-stack"],[1,"bi","bi-megaphone-fill"],[1,"bi","bi-handbag-fill"],[1,"filters"],[1,"btn"],[1,"btn","btn-primary"],[1,"d-flex","align-items-center"],["for","start",1,"me-1"],["type","date","id","start",3,"ngModelChange","change","ngModel"],["for","end",1,"me-1"],["type","date","id","end",3,"ngModelChange","change","ngModel"],[1,"table-responsive"],[1,"table"],["type","checkbox"],[4,"ngFor","ngForOf"],["colspan","7",1,"table-footer"],[1,"entries-info"]],template:function(r,o){r&1&&C(0,L,2,0,"div",0)(1,R,67,22,"div",1),r&2&&(l("ngIf",o.isLoading),a(),l("ngIf",!o.isLoading))},dependencies:[k,A,j,T,B,V],styles:[".overview[_ngcontent-%COMP%]{width:90%;max-width:1200px;background-color:#fffc;margin:30px auto;border-radius:15px;padding:35px;box-shadow:0 8px 20px #0000001a;animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out}.stats[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;gap:30px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;display:flex;justify-content:space-between;align-items:center;padding:15px 20px;width:320px;border-radius:12px;box-shadow:0 6px 12px #00000026;transition:all .4s ease;animation:_ngcontent-%COMP%_slideUp .6s ease-out forwards;opacity:0;transform:translateY(20px)}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 10px 15px #2d60ff33}.stat-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.3s}.stat-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.5s}.stat-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#718ebf}.stat-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#2d60ff;margin-top:5px;animation:_ngcontent-%COMP%_pulse 2s infinite}.stat-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:10px;font-size:48px;color:#2d60ff;opacity:.9;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.1)}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;width:100%;margin:30px 0;gap:20px;padding:15px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a}.filters[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 15px;background-color:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:500}.filters[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e9ecef;transform:translateY(-2px)}.filters[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2d60ff;color:#fff;border-radius:8px;padding:8px 15px;transition:all .3s ease;border:none;font-weight:500}.filters[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#1a4ad9;transform:translateY(-2px);box-shadow:0 4px 8px #2d60ff4d}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e9ecef;border-radius:8px;transition:all .3s ease;box-shadow:0 2px 5px #0000000d}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#2d60ff;box-shadow:0 0 0 3px #2d60ff33;outline:none}td[_ngcontent-%COMP%]{padding:12px;text-align:left}td.completed[_ngcontent-%COMP%]{color:green;font-weight:700}td.failed[_ngcontent-%COMP%]{color:red;font-weight:700}td.pending[_ngcontent-%COMP%]{color:orange;font-weight:700}td.on-progress[_ngcontent-%COMP%]{color:#00f;font-weight:700}td.refund[_ngcontent-%COMP%]{color:purple;font-weight:700}.table-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.table-responsive[_ngcontent-%COMP%]{width:96%;margin:15px auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 15px #0000001a;overflow-x:auto}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;white-space:nowrap;font-size:16px;font-weight:500}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;border-bottom:2px solid #e9ecef;font-size:16px;font-weight:600;color:#718ebf;background-color:#f8f9fa;position:sticky;top:0;z-index:10}.table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;transition:background-color .2s ease}.table-responsive[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f8f9fa}.table-responsive[_ngcontent-%COMP%]   td.completed[_ngcontent-%COMP%]{color:#37b853;font-weight:700}.table-responsive[_ngcontent-%COMP%]   td.failed[_ngcontent-%COMP%]{color:#a55f77;font-weight:700}.table-responsive[_ngcontent-%COMP%]   td.pending[_ngcontent-%COMP%]{color:#ffb321;font-weight:700}.table-responsive[_ngcontent-%COMP%]   td.on-progress[_ngcontent-%COMP%]{color:#00f;font-weight:700}.table-responsive[_ngcontent-%COMP%]   td.refund[_ngcontent-%COMP%]{color:#007aff;font-weight:700}.table-responsive[_ngcontent-%COMP%]   td.rejected[_ngcontent-%COMP%]{color:#eb4d4d;font-weight:700}.table-responsive[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]{text-align:left;padding:15px;font-size:14px;color:#555;background-color:#f8f9fa;border-radius:0 0 10px 10px}.table-responsive[_ngcontent-%COMP%]   .entries-info[_ngcontent-%COMP%]{font-weight:500}@media (max-width: 992px){.table-responsive[_ngcontent-%COMP%]{width:90%;margin:15px auto}}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{width:90%;padding:10px;border-radius:5px;margin:15px auto 30px}}@media (max-width: 480px){.table-responsive[_ngcontent-%COMP%]{padding:5px}table[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 768px){.dashboard[_ngcontent-%COMP%]{margin-top:60px;margin-left:40px;width:calc(100% - 60px);overflow-x:hidden}.overview[_ngcontent-%COMP%]{width:95%;padding:20px}.stats[_ngcontent-%COMP%]{flex-direction:column;align-items:center;width:100%;gap:20px}.stat-card[_ngcontent-%COMP%]{width:90%;max-width:350px}.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:15px 10px}.filters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%;margin:5px 0}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(45,96,255,.2);border-radius:50%;border-top-color:#2d60ff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"],data:{animation:[y("fadeInAnimation",[v(":enter",[h({opacity:0}),O("0.8s ease-in",h({opacity:1}))])]),y("cardAnimation",[z("in",h({opacity:1,transform:"translateY(0)"})),v(":enter",[h({opacity:0,transform:"translateY(30px)"}),O("0.6s ease-out")])])]}})}}return s})();export{Q as MyWalletComponent};
