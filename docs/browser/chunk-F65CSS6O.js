import{a as j}from"./chunk-QHJLIQUI.js";import{a as k}from"./chunk-M5QVVNU3.js";import{a as A}from"./chunk-IP3FY2TA.js";import{A as z,c as F,f as T,k as U}from"./chunk-5ZW25HYA.js";import"./chunk-CU2TEK6Q.js";import"./chunk-JKYV32XC.js";import"./chunk-SLPUACWX.js";import"./chunk-MMGRQEJU.js";import"./chunk-Q5MV2RZV.js";import{k as y,l as S,s as D,u as E,w as I}from"./chunk-EJ3EEOXZ.js";import{Cb as d,Kb as t,Lb as n,Mb as m,Vb as p,Wb as M,eb as a,ec as o,fc as g,gc as v,hc as O,jc as h,kb as u,kc as x,lc as b,qb as C,rc as f,sc as w,tc as _,vb as P}from"./chunk-FHROAHAP.js";import"./chunk-WWX6BADO.js";function W(l,B){if(l&1&&(t(0,"tr")(1,"td",19),m(2,"input",14),n(),t(3,"td"),o(4),n(),t(5,"td"),o(6),f(7,"date"),n(),t(8,"td"),o(9),f(10,"date"),n(),t(11,"td"),o(12),f(13,"currency"),n(),t(14,"td")(15,"div",20)(16,"div",21),o(17),n()()()()),l&2){let e=B.$implicit,r=M();a(4),g(e.invoiceNumber),a(2),g(_(7,6,e.issueDate,"yyyy-MM-dd")),a(3),g(_(10,9,e.dueDate,"yyyy-MM-dd")),a(3),g(w(13,12,e.totalAmount)),a(3),d("ngClass",r.getStatusClass(e.status)),a(2),v(" ",e.status," ")}}var Q=(()=>{class l{constructor(e,r,i){this.authService=e,this.invoiceService=r,this.toastr=i,this.invoices=[],this.isLoading=!0,this.currentPage=1,this.itemsPerPage=10,this.statusOptions=[],this.startDate="",this.endDate="",this.filters=["All","Deleted"],this.originalInvoices=[]}ngOnInit(){this.fetchStatuses(),this.authService.fetchInvoices().subscribe({next:e=>{this.invoices=e,this.originalInvoices=[...e],this.isLoading=!1},error:e=>{this.toastr.error("Error fetching invoices","Error"),this.isLoading=!1}})}fetchStatuses(){this.invoiceService.getStatuses().subscribe({next:e=>{this.statusOptions=e},error:e=>{console.error("Error fetching statuses:",e)}})}filter(e){e==="All"?(this.startDate="",this.endDate="",this.invoices=[...this.originalInvoices]):this.invoices=this.originalInvoices.filter(r=>r.status===e)}applyDateFilter(){if(this.invoices=[...this.originalInvoices],!this.startDate&&!this.endDate)return;let e=this.startDate?new Date(this.startDate):null,r=this.endDate?new Date(this.endDate):null;e&&e.setHours(0,0,0,0),r&&r.setHours(23,59,59,999),this.invoices=this.invoices.filter(i=>{let s=new Date(i.issueDate);s.setHours(0,0,0,0);let c=!e||s>=e,N=!r||s<=r;return c&&N})}getStatusClass(e){switch(e){case"Pending":return"status-pending";case"OnReview":return"status-review";case"Completed":return"status-completed";case"Rejected":return"status-rejected";case"Canceled":return"status-canceled";case"Onprogress":return"status-onprogress";default:return""}}getDisplayedInvoices(){let e=(this.currentPage-1)*this.itemsPerPage,r=e+this.itemsPerPage;return this.invoices.slice(e,r)}get totalPages(){return Math.ceil(this.invoices.length/this.itemsPerPage)}static{this.\u0275fac=function(r){return new(r||l)(u(k),u(j),u(A))}}static{this.\u0275cmp=C({type:l,selectors:[["app-users"]],decls:47,vars:7,consts:[[1,"container"],[1,"d-flex","p-2"],[1,"filters"],[1,"btn"],[1,"btn","btn-primary"],[1,"d-flex","align-items-center"],["for","start",1,"me-1"],["type","date","id","start",3,"ngModelChange","change","ngModel"],["for","end",1,"me-1"],["type","date","id","end",3,"ngModelChange","change","ngModel"],[1,"btn","Show"],[1,"cont"],[1,"table-responsive"],[1,"table"],["type","checkbox"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],[1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"mx-2"],[1,"checkbox-cell"],[1,"",3,"ngClass"],[1,""]],template:function(r,i){r&1&&(t(0,"div",0),m(1,"div",1),t(2,"div",2)(3,"button",3),o(4,"Bulk Actions \u25BC"),n(),t(5,"button",4),o(6,"Apply"),n(),t(7,"div",5)(8,"label",6),o(9,"Start Date:"),n(),t(10,"input",7),b("ngModelChange",function(c){return x(i.startDate,c)||(i.startDate=c),c}),p("change",function(){return i.applyDateFilter()}),n()(),t(11,"div",5)(12,"label",8),o(13,"End Date:"),n(),t(14,"input",9),b("ngModelChange",function(c){return x(i.endDate,c)||(i.endDate=c),c}),p("change",function(){return i.applyDateFilter()}),n()(),t(15,"button",4),o(16,"Filter"),n(),t(17,"button",4),o(18,"Export to CSV"),n(),t(19,"button",10),o(20,"Show / Hide columns"),n()(),t(21,"div",11)(22,"div",12)(23,"table",13)(24,"thead")(25,"tr")(26,"th"),m(27,"input",14),n(),t(28,"th"),o(29,"Invoice Number"),n(),t(30,"th"),o(31,"Issue Date"),n(),t(32,"th"),o(33,"Due Date"),n(),t(34,"th"),o(35,"Amount"),n(),t(36,"th"),o(37,"Status"),n()()(),t(38,"tbody"),P(39,W,18,14,"tr",15),n()(),t(40,"div",16)(41,"button",17),p("click",function(){return i.currentPage=i.currentPage-1}),o(42," Previous "),n(),t(43,"span",18),o(44),n(),t(45,"button",17),p("click",function(){return i.currentPage=i.currentPage+1}),o(46," Next "),n()()()()()),r&2&&(a(10),h("ngModel",i.startDate),a(4),h("ngModel",i.endDate),a(25),d("ngForOf",i.invoices),a(2),d("disabled",i.currentPage===1),a(3),O("Page ",i.currentPage," of ",i.totalPages,""),a(),d("disabled",i.currentPage===i.totalPages))},dependencies:[S,D,z,F,T,U,I,y,E],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{width:90%;background-color:#ffffffb3;margin:30px auto;border-radius:15px;padding:35px;font-family:Inter,sans-serif}.cont[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.cont[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.cont[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#007bff;border-radius:10px}.cont[_ngcontent-%COMP%]{scrollbar-color:#007bff #f1f1f1;scrollbar-width:thin}.create-btn[_ngcontent-%COMP%]{background-color:#2d60ff;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:16px;font-weight:600;margin-right:10px;cursor:pointer}.delete[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important;padding:8px 20px;border:none;border-radius:12px;cursor:pointer;box-shadow:0 4px 6px #0003;transition:all .3s ease-in-out;display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600}.delete[_ngcontent-%COMP%]:hover{box-shadow:0 6px 8px #0006}.trash-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:#0d62e2}.refresh-icon[_ngcontent-%COMP%]{width:20px;height:20px;fill:#0d62e2;animation:rotate 1.5s linear infinite;color:gray}.filters[_ngcontent-%COMP%]{display:flex;margin:20px auto;gap:20px}.filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:gray}.filters[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 12px;background-color:#f5f5f5;border:1px solid #dcdcdc;border-radius:5px;cursor:pointer}select.form-select[_ngcontent-%COMP%]{padding:4px 8px;border-radius:6px;font-weight:500}.filters[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#2d60ff;color:#fff;border-radius:8px;padding:2px 8px}.filters[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #dcdcdc;border-radius:5px}td[_ngcontent-%COMP%]{padding:12px;text-align:left}.status-pending[_ngcontent-%COMP%]{color:#856404}.status-review[_ngcontent-%COMP%]{color:#0c5460}.status-completed[_ngcontent-%COMP%]{color:#155724}.status-rejected[_ngcontent-%COMP%]{color:#721c24}.status-canceled[_ngcontent-%COMP%]{color:#383d41}.status-onprogress[_ngcontent-%COMP%]{color:#004085}.form-select[_ngcontent-%COMP%]{background-color:transparent!important;box-shadow:none!important;border:none!important;padding-left:0;font-weight:700;width:200px;height:40px;cursor:pointer}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:10px;background-color:#fff;color:#333;font-weight:500}.form-select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:1px solid #ccc;padding:8px 12px;font-size:16px;color:#333;width:100%;cursor:pointer;border-radius:4px}.table-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.table-responsive[_ngcontent-%COMP%]{width:88%;margin:15px 0;background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 10px #0000001a;overflow-x:auto}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:600px}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;white-space:nowrap;color:#000;font-size:16px;font-weight:500}.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;color:#718ebf;font-size:16px;font-weight:500;border-bottom:2px solid #e9ecef}.table-responsive[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef}.table-responsive[_ngcontent-%COMP%]   .table-footer[_ngcontent-%COMP%]{text-align:left;padding:15px;font-size:14px;color:#555}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin:0 5px;cursor:pointer;font-size:15px}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .copy[_ngcontent-%COMP%]{color:#2ca9bc}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{color:#ff9706}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#0d62e2}.table-responsive[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   .deletee[_ngcontent-%COMP%]{color:#e02727}@media (max-width: 992px){.table-responsive[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:90%;margin:15px auto}}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:90%;padding:10px;border-radius:5px;margin:15px auto 30px}}@media (max-width: 480px){.table-responsive[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{padding:5px}.table-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:12px}}']})}}return l})();export{Q as UsersComponent};
