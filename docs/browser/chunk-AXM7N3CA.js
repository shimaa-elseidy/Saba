import{a}from"./chunk-SLPUACWX.js";import{c as l}from"./chunk-Q5MV2RZV.js";import{C as i,O as u,Y as c,ba as p,c as h,r as s}from"./chunk-FHROAHAP.js";var b=(()=>{class o{constructor(r){this.http=r,this.recentActivitiesCache$=null}getLastThirtyDaysStats(){return this.http.get(`${a.apiUrl}/Dashboard/last-30-days-stats`).pipe(s(r=>{return r&&Array.isArray(r)?r.map(t=>({date:t.date||t.Date,tours:t.tours||t.Tours||t.tourCount||0,bookings:t.bookings||t.Bookings||t.bookingCount||0,revenue:t.revenue||t.Revenue||t.revenueAmount||Math.floor(Math.random()*1e3)+200})):this.generateMockData()}),i(this.handleError.bind(this)))}getAllDashCount(){return this.http.get(`${a.apiUlrDashboard}/summary`)}getYearlyStats(){return this.http.get(`${a.apiUrl}/Dashboard/last-year-stats`).pipe(s(r=>r&&Array.isArray(r)?r.map(t=>({date:t.date||t.Date,tours:t.tours||t.Tours||t.tourCount||0,bookings:t.bookings||t.Bookings||t.bookingCount||0})):this.generateMockWeeklyData()),i(this.handleError.bind(this)))}getUsersCount(){return this.http.get(`${a.apiUrl}/ManageUser/GetUserCounts`)}getRecentActivities(){return this.recentActivitiesCache$||(this.recentActivitiesCache$=this.http.get(`${a.apiUrl}/Dashboard/recent-activities`).pipe(u(1))),this.recentActivitiesCache$}createTour(r){return this.http.post("https://sabatours.runasp.net/api/Tour",r)}generateMockData(){let r=[],t=new Date;for(let e=29;e>=0;e--){let n=new Date(t);n.setDate(t.getDate()-e),r.push({date:n.toISOString().split("T")[0],tours:Math.floor(Math.random()*20)+5,bookings:Math.floor(Math.random()*15)+2,revenue:Math.floor(Math.random()*1e3)+200})}return r}generateMockWeeklyData(){let r=[],t=new Date;for(let e=6;e>=0;e--){let n=new Date(t);n.setDate(t.getDate()-e),r.push({date:n.toISOString().split("T")[0],tours:Math.floor(Math.random()*12)+3,bookings:Math.floor(Math.random()*8)+1,revenue:Math.floor(Math.random()*1e3)+200})}return r}handleError(r){return console.error("Dashboard service error:",r),new h(t=>{t.next(this.generateMockData()),t.complete()})}static{this.\u0275fac=function(t){return new(t||o)(p(l))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{b as a};
