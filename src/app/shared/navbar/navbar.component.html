  <div class="top-navbar">
  <div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center w-100">
      <div class="navbar-brand">
        <span>Welcome to Saba Tours</span>
        <span class="d-none d-md-inline" style="cursor: pointer;" (click)="callPhone()"><i class="bi bi-telephone-fill mx-2"></i> +2 0100 067 6285</span>
      </div>
      <div class="navbar-contact">
        <a href="mailto:{{email}}" class="email-link">
          <i class="bi bi-envelope"></i> {{email}}
        </a>
        <a href="https://www.google.com/maps/dir//X5V4%2B3GC+Oula+Al+Haram+El+Omraniya+Giza+Governorate/@29.9926875,31.1562656,15z/data=!4m8!4m7!1m0!1m5!1m1!1s0x145845da31b56e5d:0x9a9e3763d784b8f6!2m2!1d31.1562656!2d29.9926875?entry=ttu&g_ep=EgoyMDI1MDQyMS4wIKXMDSoASAFQAw%3D%3D" target="_blank" class="location-link d-none d-lg-inline">
          <i class="bi bi-geo-alt-fill mx-2"></i> Ouia AT Haram, El Omraniya, Giza Governorate
        </a>
      </div>
    </div>
  </div>
</div>

<nav class="main-navbar navbar navbar-expand-lg">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <!-- اللوجو في المنتصف -->
    <a class="navbar-brand" routerLink="/">
      <img src="assets/sabba.png" alt="Logo" class="logo">
    </a>

    <!-- زر القائمة الجانبية -->
    <button class="navbar-toggler d-lg-none custom-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- القائمة في الشاشات الكبيرة -->
    <div class="navbar-collapse d-lg-flex" id="navbarNav">
      <ul class="navbar-nav mx-auto d-lg-flex flex-row">
        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/listingTours" routerLinkActive="active-link">Tour List</a>
        </li>
        <!-- <li class="nav-item" *ngIf="isAdmin">
          <a class="nav-link" routerLink="/dashboard" routerLinkActive="active-link">Dashboard</a>
        </li> -->
        <!-- Category Dropdown -->
        <li class="nav-item dropdown" #categoryDropdown [ngClass]="{'show': isCategoryDropdownOpen}">
          <a class="nav-link d-flex align-items-center" id="categoryDropdown" (click)="toggleCategoryDropdown($event)">
            Categories
            <i class="bi bi-chevron-down dropdown-icon ms-1" [ngClass]="{'rotate-icon': isCategoryDropdownOpen}"></i>
          </a>
          <ul class="dropdown-menu animate-dropdown" [ngClass]="{'show': isCategoryDropdownOpen}" aria-labelledby="categoryDropdown" (click)="$event.stopPropagation()">
            <li><a class="dropdown-item" routerLink="/guide" routerLinkActive="active-link">Guide Of Egypt</a></li>
            <li><a class="dropdown-item" routerLink="/classical" routerLinkActive="active-link">Classical Tour</a></li>
            <li><a class="dropdown-item" routerLink="/day" routerLinkActive="active-link">Day Trips</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/turkey" routerLinkActive="active-link">Turkey Trips</a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link" routerLink="/blogPosts" routerLinkActive="active-link">Blog</a>
        </li>
        <!-- Info Dropdown -->
        <li class="nav-item dropdown" #infoDropdown [ngClass]="{'show': isInfoDropdownOpen}">
          <a class="nav-link d-flex align-items-center" id="infoDropdown" (click)="toggleInfoDropdown($event)">
            Info
            <i class="bi bi-chevron-down dropdown-icon ms-1" [ngClass]="{'rotate-icon': isInfoDropdownOpen}"></i>
          </a>
          <ul class="dropdown-menu animate-dropdown" [ngClass]="{'show': isInfoDropdownOpen}" aria-labelledby="infoDropdown" (click)="$event.stopPropagation()">
            <li><a class="dropdown-item" routerLink="/about" routerLinkActive="active-link">About Us</a></li>
            <li><a class="dropdown-item" routerLink="/contactUs" routerLinkActive="active-link">Contact</a></li>
            <li><a class="dropdown-item" routerLink="/travelTips" routerLinkActive="active-link">Travel Tips</a></li>
            <li><a class="dropdown-item" routerLink="/help" routerLinkActive="active-link">Help Center</a></li>
            <li><a class="dropdown-item" routerLink="/privacy" routerLinkActive="active-link">Privacy Policy</a></li>
            <li><a class="dropdown-item" routerLink="/terms" routerLinkActive="active-link">Terms Of Service</a></li>
          </ul>
        </li>
      </ul>
      
      <div class="dropdown" #userDropdown>
        <div class="user-profile" data-bs-toggle="dropdown">
          <div class="user-info">
            <span *ngIf="isLoggedIn">Hi, {{ userRole }}</span>
            <span *ngIf="!isLoggedIn">Login</span>
            <i class="bi bi-chevron-down"></i>
          </div>
          <div class="profile-icon">
            <img *ngIf="profileImage" [src]="profileImage" alt="Profile" class="profile-img">
            <i *ngIf="!profileImage" class="bi bi-person-circle profile-icon-default"></i>
          </div>
        </div>
      
        <ul class="dropdown-menu dropdown-menu-end">
          <ng-container *ngIf="!isLoggedIn">
            <li><a class="dropdown-item" routerLink="/login">Login</a></li>
            <li><a class="dropdown-item" routerLink="/register">Register</a></li>
          </ng-container>
          <ng-container *ngIf="isLoggedIn">
            <li><a class="dropdown-item" *ngIf="isAdmin" routerLink="/dashboard" routerLinkActive="active-link">Dashboard</a></li>
            <li><a class="dropdown-item" (click)="logOut()">Logout</a></li>
          </ng-container>
        </ul>
      </div>
    </div>
  </div>
</nav>

<div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menu</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/listingTours" routerLinkActive="active-link">Tour List</a>
      </li>
      <!-- <li class="nav-item" *ngIf="isAdmin">
        <a class="nav-link" routerLink="/dashboard" routerLinkActive="active-link">Dashboard</a>
      </li> -->
      <li class="nav-item">
        <a class="nav-link collapsed d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#categoryMenu" href="#categoryMenu" aria-expanded="false" (click)="toggleMobileDropdown($event)">
          Categories <i class="bi bi-chevron-down dropdown-icon"></i>
        </a>
        <div class="collapse mobile-dropdown" id="categoryMenu" data-bs-parent="">
          <ul class="list-unstyled ps-3">
            <li><a class="dropdown-item" routerLink="/guide" routerLinkActive="active-link">Guide Of Egypt</a></li>
            <li><a class="dropdown-item" routerLink="/classical" routerLinkActive="active-link">Classical Tour</a></li>
            <li><a class="dropdown-item" routerLink="/day" routerLinkActive="active-link">Day Trips</a></li>
          </ul>
        </div>
      </li>
    
      <li class="nav-item">
        <a class="nav-link" routerLink="/turkey" routerLinkActive="active-link">Turkey Trips</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/blogPosts" routerLinkActive="active-link">Blog</a>
      </li>
      <li class="nav-item">
        <a class="nav-link collapsed d-flex justify-content-between align-items-center" data-bs-toggle="collapse" data-bs-target="#infoMenu" href="#infoMenu" aria-expanded="false" (click)="toggleMobileDropdown($event)">
          Info <i class="bi bi-chevron-down dropdown-icon"></i>
        </a>
        <div class="collapse mobile-dropdown" id="infoMenu" data-bs-parent="">
          <ul class="list-unstyled ps-3">
            <li><a class="dropdown-item" routerLink="/about" routerLinkActive="active-link">About Us</a></li>
            <li><a class="dropdown-item" routerLink="/contactUs" routerLinkActive="active-link">Contact</a></li>
            <li><a class="dropdown-item" routerLink="/travelTips" routerLinkActive="active-link">Travel Tips</a></li>
            <li><a class="dropdown-item" routerLink="/help" routerLinkActive="active-link">Help Center</a></li>
            <li><a class="dropdown-item" routerLink="/privacy" routerLinkActive="active-link">Privacy Policy</a></li>
            <li><a class="dropdown-item" routerLink="/terms" routerLinkActive="active-link">Terms Of Service</a></li>
          </ul>
        </div>
      </li>
    </ul>
    
    <div class="mobile-user-profile mt-4">
      <div class="d-flex align-items-center">
        <div class="me-3">
          <img *ngIf="profileImage" [src]="profileImage" alt="Profile" class="profile-img">
          <i *ngIf="!profileImage" class="bi bi-person-circle profile-icon-default"></i>
        </div>
        <div>
          <div class="fw-bold" *ngIf="isLoggedIn">Hi, {{ userRole }}</div>
          <div class="fw-bold" *ngIf="!isLoggedIn">Login</div>
          <div class=" " *ngIf="isLoggedIn">{{email}}</div>
        </div>
      </div>
      <div class="mt-3" *ngIf="isLoggedIn">
        <a class="nav-link"  *ngIf="isAdmin" routerLink="/dashboard" routerLinkActive="active-link">Dashboard</a>
        <a (click)="logOut()" class="d-block py-2">Logout</a>
      </div>
      <div class="mt-3" *ngIf="!isLoggedIn">
        <a routerLink="/login" class="d-block py-2">Login</a>
        <a routerLink="/register" class="d-block py-2">Register</a>
      </div>
    </div>
  </div>
</div>
